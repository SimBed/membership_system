<%= javascript_import_module_tag "custom/navbar-movement" %>
<nav id="mainNav" class="navbar navbar-expand-lg navbar-sticky navbar-dark <%= 'bg-black' if @home != true %> inverted">

  <div class="container">
    <%= link_to root_path, class: "navbar-brand", data: {turbo: false} do %>
      <%= image_tag('SpaceLogo_white.png', alt: "logo") %>
    <% end %>

    <ul class="navbar-nav navbar-nav-secondary order-lg-3">
      <li class="nav-item d-lg-none">
        <a class="nav-link nav-icon" href="" role="button" data-bs-toggle="collapse" data-bs-target="#navbar"
          aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
          <span class="bi bi-list"></span>
        </a>
      </li>
    </ul>

    <div class="collapse navbar-collapse" id="navbar" data-bs-parent="#mainNav">
              
      <ul class="navbar-nav">
        <li class="nav-item">
          <%= link_to clients_path, class: "nav-link #{active_link_for(path: clients_path)}" do %>
            <i class="fa fa-address-card"></i>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to purchases_path, class: "nav-link #{active_link_for(path: purchases_path)}" do %>
            <i class="fa fa-cc-visa"></i>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to wkclasses_path, class: "nav-link #{active_link_for(path: wkclasses_path)}" do %>
            <i class="fa fa-dumbbell"></i>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to public_format_timetable_path, class: "nav-link #{active_link_for(path: public_format_timetable_path)}" do %>
            <i class="fa fa-calendar"></i>
          <% end %>
        </li>
      </ul>

      <ul class="navbar-nav" >
        <li id="" class="nav-item dropdown dropdown-hover">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown-1" role="button" data-bs-toggle="dropdown"
            aria-expanded="false" tabindex='-1'>
            <i class="fa fa-list"></i>
          </a>
          <div class="highnavbar dropdown-menu dropdown-menu-custom" aria-labelledby="navbarDropdown-1">
            <div class="row g-0">
              <div class="col-6 p-1 p-md-4">
              <% navbarPresenter = NavbarPresenter.new %>
                  <%= navbarPresenter.dropdown_item('Accounts', employee_accounts_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Achievements', achievements_path, @admin_plus) %>
                  <%= navbarPresenter.dropdown_item('Blasts', blast_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Challenges', challenges_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Declarations', declarations_path, @junioradmin_plus) %>
                  <%= navbarPresenter.dropdown_item('Discounts', discounts_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Discount Reasons', discount_reasons_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Freezes', freezes_path, @junioradmin_plus) %>
                  <%= navbarPresenter.dropdown_item('Instructors', instructors_path, @admin_plus) %>
                  <%= navbarPresenter.dropdown_item('Instructor rates', instructor_rates_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Markers', strength_markers_path, @admin_plus) %>
                  <%= navbarPresenter.dropdown_item('Purchase Analysis', analysis_purchases_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Other Services', other_services_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Payments', payments_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Products', products_path, @junioradmin_plus) %>
                  <%= navbarPresenter.dropdown_item('Restarts', restarts_path, @junioradmin_plus) %>
                  <%= navbarPresenter.dropdown_item('Settings', superadmin_settings_path, @superadmin) %>
                  <%= navbarPresenter.dropdown_item('Timetables', timetables_path, @admin_plus) %>
                  <%= navbarPresenter.dropdown_item('Workouts', workouts_path, @admin_plus) %>
                  <%= navbarPresenter.dropdown_item('Workout Groups', workout_groups_path, @admin_plus) %>
              </div>
              <% if multiple_roles? %>                  
                <div class="col-6 p-1 p-md-4">
                  <span class="dropdown-label">ROLE</span>
                  <%= content_tag :div, "*#{current_role}", class: "dropdown-item text-uppercase" %>                
                  <% navbar_roles.each do |role| %>
                    <%= link_to role.name, "/switch_account_role?role=#{role.name}", class: "dropdown-item" %>
                  <% end %>
                </div>  
              <% end %>             
            </div>
          </div>
        </li>

        <li class="nav-item">
          <%= link_to logout_path, class: "nav-link", data: {turbo_method: :delete} do %>               
            <i class="fa fa-door-open"></i>
          <% end %>
        </li>
      </ul>
    </div>
  </div>
</nav>