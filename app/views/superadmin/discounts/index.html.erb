<h4>Discounts <%= link_to image_tag('add.png'), new_superadmin_discount_path %></h4>
<div id="discounts_table" class="container px-1 mb-5 margin-override overflow-auto">
  <table class="table table-secondary caption-top table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>ID</th>
        <th>Percent</th>
        <th>Fixed</th>
        <th>Group</th>
        <th>Pt</th>
        <th>Online</th>
        <th>Aggregate</th>
        <th>Start date</th>
        <th>End date</th>
        <th colspan="3"></th>
      </tr>
    </thead>
      <tbody>
      <% @discount_type_hash.each_key do |rationale| %>
        <td colspan="13" class="fw-bolder text-uppercase text-light bg-secondary"><%= rationale %></td>
        <% @discount_type_hash[rationale].each do |discount| %>
          <tr>
            <td><%= discount.discount_reason.name %></td>
            <td><%= discount.id %></td>
            <td><%= number_with_precision(discount.percent&.round(2), precision: 2,  strip_insignificant_zeros: true) %></td>
            <td><%= number_with_delimiter(discount.fixed) %></td>
            <td><%= discount.group? ? raw("&check;") : "-" %></td>
            <td><%= discount.pt? ? raw("&check;") : "-" %></td>
            <td><%= discount.online? ? raw("&check;") : "-" %></td>
            <td><%= discount.aggregatable? ? raw("&check;") : "-" %></td>
            <td><%= discount.start_date.strftime '%d %b %Y' %></td>
            <td><%= (discount.end_date - Date.today > 3650) ? raw("&infin;") : (discount.end_date.strftime '%d %b %Y') %></td>
            <td><%= link_to image_tag('attendances.png', class: ["table_icon",("active-workout" unless discount.current?)].compact.join(' ')), superadmin_discount_path(discount, current: !discount.current?), method: :patch %></td>                    
            <td><%= link_to image_tag('edit.png', class: "table_icon"), edit_superadmin_discount_path(discount) unless discount.no_discount %></td>
            <td><%= link_to image_tag('delete.png', class: "table_icon"), superadmin_discount_path(discount), method: :delete, data: { confirm: 'Discount will be deleted. Are you sure?' } unless discount.no_discount %></td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>
