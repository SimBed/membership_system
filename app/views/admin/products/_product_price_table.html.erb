<table class="table table-secondary table-striped caption-top">
  <caption>Product Categories</caption>
  <tbody>
    <tr>
      <th scope="col">Base Price</th>
      <th scope="col">From</th>
      <th scope="col">Until</th>
      <th scope="col">Count</th>
      <th colspan="3"><%= link_to image_tag('add.png', class:'table_icon'), new_admin_price_path(product_id: params[:id]) %></th>
    </tr>
    <% @prices.each do |price| %>
      <tr>
        <td><%= number_with_delimiter(price.price) %></td>
        <td><%= price.date_from.strftime('%d %b %y') %></td>
        <td><%= ((price.date_until || Date.today) - Date.today > 3650) ? raw("&infin;") :price.date_until&.strftime('%d %b %y') %></td>
        <td><%= Purchase.where(price_id:price).size %></td>
        <td><%= link_to image_tag('attendances.png', class: ["table_icon",("active-workout" unless price.current?)].compact.join(' ')), admin_price_path(price, current: !price.current?, product_id: params[:id] ), method: :patch %></td>                    
        <td><%= link_to image_tag('edit.png', class: "table_icon"), edit_admin_price_path(price)%></td>
        <!--td><%#= button_to(image_tag('delete.png', class: "table_icon").html_safe, admin_price_path(price), method: :delete, form: {data: { turbo_confirm: 'Price will be deleted. Are you sure?' }}) %></td-->
        <td><%= button_to 'X', admin_price_path(price), class: "button-image-sub", method: :delete, form: {data: { turbo_confirm: 'Price will be deleted. Are you sure?' }} %></td>
      </tr>
    <% end %>
  </tbody>
</table>
