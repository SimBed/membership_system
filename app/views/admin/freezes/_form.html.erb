<%= form_with(model: [:admin, freeze], class: 'admin_form mb-2') do |form| %>
  <% purchase = params[:purchase] || @freeze.purchase.id %>
  <%= turbo_frame_tag 'errors' do %>  
    <% if freeze.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(freeze.errors.count, "error") %> prohibited this adjustment from being saved:</h2>
        <ul>
          <% freeze.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
  <% end %>

  <div><%= form.hidden_field :purchase_id, value: purchase || freeze.purchase_id %></div>

  <div class="field" id="freeze_start" data-controller="freeze">
    <%= form.label :start_date %>
    <%= form.date_field :start_date, default: Time.zone.now, data: {action: "freeze#dynamic_end_date"} %>
  </div>

  <div class="field" id="freeze_end">
    <%= form.label :end_date %>
    <%= form.date_field :end_date %>
  </div>

  <div class="field">
    <%= form.label :note %>
    <%= form.text_area :note %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>

  <div class="cancel">
    <%= link_to image_tag('delete.png', class: "table_icon"), admin_purchase_path(purchase) %>
  </div>  
<% end %>
